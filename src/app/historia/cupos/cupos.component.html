<div class="p-card">
    <p-toolbar styleClass="p-mb-4">

        <ng-template pTemplate="left">
            <h3 class="p-m-0">Cupos</h3>
        </ng-template>

        <ng-template pTemplate="right" class="button">
            <button pButton pRipple label="Agregar" icon="pi pi-plus" class="p-button-danger mr-2"
                (click)="openModal()"></button>

            <button pButton pRipple label="Exportar" icon="pi pi-upload" class="p-button-primary"></button>
        </ng-template>

    </p-toolbar>
    <p-table #dt [value]="listaCupos" [rows]="10" [paginator]="true" [globalFilterFields]="['dni']"
        [(selection)]="selectedCupo" [rowHover]="true" datakey="id"
        currentPageReportTemplate="Mostrando de {first} a {last} de {totalRecords} listas" responsiveLayout="scroll"
        [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]">
        <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
                <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input type="text" pInputText (input)="dt.filterGlobal($event.tarjet.value,'contains')"
                        placeholder="DNI...">
                </span>
            </div>
        </ng-template>
        <ng-template class="ng-template" pTemplate="header">
            <tr>
                <!-- <th style="text-align: center">#</th> -->
                <th style="text-align: center">DNI</th>
                <th style="text-align: center">APELLIDOS</th>
                <th style="text-align: center">NOMBRES</th>
                <th style="text-align: center">SERVICIO(UPS)</th>
                <th style="text-align: center">HORARIO A.</th>
                <th style="text-align: center">FECHA A.</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-cupo style="text-align: center;">
            <tr style="text-align: center">
                <td style="text-align: center">{{ cupo.dni }}</td>
                <td style="text-align: center">{{ cupo.apellidos }}</td>
                <td style="text-align: center">{{ cupo.nombres }}</td>
                <td style="text-align: center">{{ cupo.servicio }}</td>
                <td style="text-align: center">{{ cupo.horarioAtencion }}</td>
                <td style="text-align: center">{{ cupo.fechaAtencion }}</td>
            </tr>
        </ng-template>
    </p-table>
</div>

<!--                 INICIO DIALOG DE CUPOS             -->
<p-dialog [(visible)]="cuposDialog" [style]="{width: '1080px'}" header="Registrar Cupos" [modal]="true"
    styleClass="p-fluid">
    <ng-template pTemplate="body">
        <div class="grid">
            <div class="p-field col-5">
                <label>SERVICIO (UPS)</label>
                <div class="col-10">
                    <p-dropdown [options]="servicios" [(ngModel)]="selectedServicio"
                        placeholder="Seleccione un servicio" optionLabel="nombreServicio" [showClear]="false"
                        (ngModelChange)="changeServicioSelected($event)">
                    </p-dropdown>
                </div>
                <div class="card mt-4">
                    <p-table [value]="listaPersonal" selectionMode="single" [(selection)]="selectedPersonal"
                        responsiveLayout="scroll" (onRowSelect)="onRowSelect($event)"
                        (onRowUnselect)="onRowUnselect($event)">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>Nro</th>
                                <th>Apellidos</th>
                                <th>Nombres</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-data>
                            <tr [pSelectableRow]="data">
                                <td>{{ data.nro }}</td>
                                <td>{{ data.apellidos }}</td>
                                <td>{{ data.nombres }}</td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
            <!-- <div class="col-1"></div> -->
            <div class="p-field col-5 ml-4">
                <label>PERSONA QUE ATIENDE</label>
                <div class="col-6">
                    <h4>{{ personalSelected }}</h4>

                    <div class="tabla">
                        <div class="col-4 flex table" *ngFor="let item of listaHorarios">
                            <div class=" hora p-4" [value]="item.hour" (click)="clickDiv($event)">{{ item.hour }}</div>
                            <div class=" hoy p-4">{{ item.today }}</div>
                            <div class=" maniana p-4">{{ item.tomorrow }}</div>
                        </div>
                    </div>
                </div>
                <!-- <div class="card mt-4 col-6"> -->
                <p-table [value]="listaHorarios" styleClass="p-datatable-gridlines" selectionMode="single"
                    [(selection)]="selectedHorario" responsiveLayout="scroll" (onRoWSelect)="selectRowHorario($event)"
                    (onRowUnselect)="unselectHorario($event)" [cellSelection]="'single'">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Hora</th>
                            <th>Hoy</th>
                            <th>Ma√±ana</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-data1>
                        <tr [pSelectableRow]="data1">
                            <td>{{ data1.hour }}</td>
                            <td>{{ data1.today }}</td>
                            <td>{{ data1.tomorrow }}</td>
                        </tr>
                    </ng-template>
                </p-table>

            </div>

        </div>
    </ng-template>

    <ng-template pTemplate=footer>
        <button pButton type="button" label="cancelar" class="p-button-danger" (click)="closeDialogCupos()"></button>
        <button pButton type="button" label="Guardar" (click)="aceptarDialogCupos()"></button>
    </ng-template>

</p-dialog>
<!--                 FIN DIALOG DE CUPOS             -->

<!--                INICIO MODAL DE USUARIOS         -->
<p-dialog [(visible)]="usuarioDialog" [style]="{width: '1080px'}" header="Datos del Paciente" [modal]="true"
    styleClass="p-fluid">

    <ng-template pTemplate>
        <div class="datosPersonales border-1 m-3">
            <div class="grid m-2">
                <div class="p-field col-3">
                    <label class="ml-2 font-bold">Nombre:</label>
                    <input type="text" pInputText [(ngModel)]="nombre" />
                </div>
                <div class="p-field col-3">
                    <label class="ml-2 font-bold">A. Paterno</label>
                    <input type="text" pInputText [(ngModel)]="nombre" />
                </div>
                <div class="p-field col-3">
                    <label class="ml-2 font-bold">A. Materno</label>
                    <input type="text" pInputText [(ngModel)]="nombre" />
                </div>
                <div class="p-field col-3">
                    <label class="ml-2 font-bold">Sexo</label>
                    <input type="text" pInputText [(ngModel)]="nombre" />
                </div>
            </div>
            <div class="grid m-2">
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">fecha</label>
                    <input type="date" pInputText [(ngModel)]="fecha" />
                </div>
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">Estado Civil</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
            </div>
            <div class="grid m-2">
                <div class="p-field col-3">
                    <label class="ml-2 font-bold">Telefono</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-3">
                    <label class="ml-2 font-bold">Nacionalidad</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">Departamento</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">Provincia</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">Distrito</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
            </div>
            <div class="grid m-2">
                <div class="p-field col-6">
                    <label class="ml-2 font-bold">Centro Poblado</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-6">
                    <label class="ml-2 font-bold">Domicilio Actual</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
            </div>
        </div>
        <div class="datosExtra margin-1 m-3">
            <div class="grid m-2">
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">Tipo Seguro</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">Transeunte</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-3">
                    <label class="ml-2 font-bold">Etapa de Vida del Paciente</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">Edad</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
                <div class="p-field col-2">
                    <label class="ml-2 font-bold">Dias</label>
                    <input type="text" pInputText [(ngModel)]="estadoCivil" />
                </div>
            </div>
        </div>
    </ng-template>
</p-dialog>
<!--            FIN MODAL DE USUARIOS                -->