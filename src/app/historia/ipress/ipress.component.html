<!--TABLA IPRESS-->
<div class="p-card">
    <p-toolbar styleClass="p-mb-4">

        <ng-template pTemplate="left">
            <h3 class="p-m-0">Lista de Instituciones Prestadoras de Servicios de Salud</h3>
        </ng-template>

        <ng-template pTemplate="right" class="button">
            <button pButton pRipple label="Nuevo" icon="pi pi-plus" class="p-button-danger p-mr-2"
                (click)="openNew()"></button>
            <button pButton pRipple label="Exportar" icon="pi pi-upload" class="p-button-primary"></button>
        </ng-template>

    </p-toolbar>
    <p-table [value]="data" #dt [globalFilterFields]="['nombres','nroDoc','apPaterno']"
        styleClass="p-datatable-gridlines" [rows]="10" [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true"
        [autoLayout]="true" currentPageReportTemplate="Mostrando {first} de {last} de {totalRecords} entradas" responsiveLayout="scroll" >
        <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
                <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" (input)="dt.filterGlobal($event.target.value,'contains')"
                        placeholder="Buscar..." />
                </span>
            </div>
        </ng-template>
        <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
            <tr>
                <th style="text-align: center">Nro</th>
                <th style="text-align: center">RENAES</th>
                <th style="text-align: center">Nombre EESS</th>
                <th style="text-align: center">Categoria</th>
                <th style="text-align: center">Ubigeo</th>
                <th style="text-align: center">Red</th>
                <th style="text-align: center">Micro Red</th>
                <th style="text-align: center">Encargado</th>
                <th style="text-align: center">Jurisdiccion</th>
                <th style="text-align: center">Ambientes</th>
                <th style="text-align: center">Turnos</th>
                <th style="text-align: center">Roles</th>
                <th style="text-align: center; width:120px">Acción</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
            <tr style="text-align: center">
                <td style="text-align: center">{{ rowIndex + 1 }}</td>
                <td style="text-align: center">{{ rowData.codRENAES }}</td>
                <td style="text-align: center">{{ rowData.nombreEESS}}</td>
                <td style="text-align: center">{{ rowData.categoria ? rowData.categoria.abreviatura : "" }}</td>
                <td style="text-align: center">{{ rowData.ubicacion ? rowData.ubicacion.ubigeo : ""}}</td>
                <td style="text-align: center">{{ rowData.red? rowData.red.nombreRed : ""}}</td>
                <td style="text-align: center">{{ rowData.red? rowData.red.nombreMicroRed : ""}}</td>
                <td style="text-align: center">
                    <button pButton pRipple icon="pi pi-user" class="p-button-rounded p-button-secondary"
                        (click)="newEncargado(rowData)"></button>
                </td>
                <td style="text-align: center">
                    <button pButton pRipple icon="pi pi-map-marker" class="p-button-rounded p-button-success"
                        (click)="newJurisdiccion(rowData)"></button>
                </td>
                <td style="text-align: center">
                    <button pButton pRipple icon="pi pi-sitemap" class="p-button-rounded p-button-warning"
                        (click)="newAmbiente(rowData)"></button>
                </td>
                <td style="text-align: center">
                    <button pButton pRipple icon="pi pi-briefcase" class="p-button-rounded p-button-info"
                        (click)="newTurno(rowData)"></button>
                </td>
                <td style="text-align: center">
                    <button pButton pRipple icon="pi pi-clock" class="p-button-rounded p-button-help"
                        (click)="newRol(rowData)"></button>
                </td>
                <td style="text-align: center; display: flex">
                    <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded m-1"
                        (click)="editar(rowData)"></button>
                    <button pButton (click)="eliminar(rowData)" pTooltip="Eliminar" pRipple type="button"
                        icon="pi pi-trash" class="p-button-rounded p-button-danger m-1">
                    </button>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>


<!--IPRESS DIALOG-->
<p-dialog [(visible)]="ipressDialog" [style]="{width: '950px'}" [modal]="true" styleClass="p-fluid" autoZIndex>
    <ng-template pTemplate="header">
        <h3 class="m-0">{{titulo()}}</h3>
    </ng-template>

    <ng-template pTemplate="body">
        <form [formGroup]='form'>
            <div>
                <div class="grid">
                    <div class="p-field col-4">
                        <label>Cod. RENAES:</label>
                        <input type="text" pInputText formControlName='codRENAES' placeholder="RENAES">
                    </div>
                    <div class="p-field col-5">
                        <label>Nombre EESS:</label>
                        <input type="text" pInputText formControlName='nombreEESS' placeholder="EESS">
                    </div>
                    <div class="p-field col-3">
                        <label>Categoria:</label>
                        <p-dropdown *ngIf="!isUpdate" placeholder="Categoria IPRESS" class="inputRedondo"
                            [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" inputId="dropdown"
                            [options]="categoriasList" formControlName="categoria" optionLabel="abreviatura" required>
                        </p-dropdown>
                        <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                            dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="categoriasList"
                            formControlName="categoria" optionLabel="abreviatura" required>
                        </p-dropdown>
                    </div>
                </div>
            </div>
            <p-divider align="left">
                <div class="p-d-inline-flex p-ai-center">
                    <i class="pi pi-angle-double-right p-mr-2"></i>
                    <b> Ubicacion</b>
                </div>
            </p-divider>
            <label>Ubigeo:</label>
            <div class="grid">
                <div class="p-inputgroup col-4">
                    <input type="text" class="inputRedondo" placeholder="Ubigeo" pInputText formControlName='ubigeo'
                        (blur)="buscarUbigeo()" required />
                    <button *ngIf="!loading" type="button" pButton pRipple icon="pi pi-search" (click)="buscarUbigeo()"
                        class="p-button-outlined p-button-secondary"></button>
                    <button *ngIf="loading" type="button" pButton pRipple icon="pi pi-spin pi-spinner"
                        (click)="buscarUbigeo()" class="p-button-outlined p-button-secondary"></button>
                </div>
            </div>
            <div class="grid">
                <div class="p-field col-4">
                    <label>Departamento:</label>
                    <p-dropdown *ngIf="!isUpdate" placeholder="Departamento" class="inputRedondo"
                        [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" inputId="dropdown"
                        [options]="departamentosList" formControlName="departamento" optionLabel="departamento"
                        (onChange)="selectedDepartamento()" required>
                    </p-dropdown>
                    <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                        dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="departamentosList"
                        formControlName="departamento" optionLabel="departamento" (onChange)="selectedDepartamento()"
                        required>
                    </p-dropdown>
                </div>

                <div class="p-field col-4">
                    <label>Provincia:</label>
                    <p-dropdown *ngIf="!isUpdate" placeholder="Provincia" class="inputRedondo"
                        [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" inputId="dropdown"
                        [options]="provinciasList" formControlName="provincia" optionLabel="provincia"
                        (onChange)="selectedProvincia()" required>
                    </p-dropdown>
                    <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                        dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="provinciasList"
                        formControlName="provincia" optionLabel="provincia" (onChange)="selectedProvincia()" required>
                    </p-dropdown>
                </div>
                <div class="p-field col-4">
                    <label>Distrito:</label>
                    <p-dropdown *ngIf="!isUpdate" placeholder="Distrito" class="inputRedondo"
                        [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" inputId="dropdown"
                        [options]="distritosList" formControlName="distrito" optionLabel="distrito"
                        (onChange)="selectedDistrito()" required>
                    </p-dropdown>
                    <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                        dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="distritosList"
                        formControlName="distrito" optionLabel="distrito" (onChange)="selectedDistrito()" required>
                    </p-dropdown>
                </div>
            </div>
            <div class="grid">
                <div class="p-field col-4">
                    <label>Centro Poblado:</label>
                    <p-dropdown *ngIf="!isUpdate" placeholder="Centro Poblado" class="inputRedondo"
                        [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" inputId="dropdown"
                        [options]="CCPPList" formControlName="centroPoblado" optionLabel="ccpp" [filter]="true"
                        filterBy="ccpp" required>
                    </p-dropdown>
                    <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                        dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="CCPPList"
                        formControlName="centroPoblado" optionLabel="ccpp" [filter]="true" filterBy="ccpp" required>
                    </p-dropdown>
                </div>
                <div class="p-field col-8">
                    <label>Direccion:</label>
                    <input type="text" pInputText formControlName='direccion' placeholder="Direccion de la IPRESS">
                </div>
            </div>
            <p-divider align="left">
                <div class="p-d-inline-flex p-ai-center">
                    <i class="pi pi-angle-double-right p-mr-2"></i>
                    <b>Red de Salud</b>
                </div>
            </p-divider>
            <div class="grid">
                <div class="p-field col-6">
                    <label>Red:</label>
                    <p-dropdown *ngIf="!isUpdate" placeholder="Red de salud" class="inputRedondo"
                        [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" inputId="dropdown"
                        [options]="redesList" formControlName="red" optionLabel="nombreRed"
                        (onChange)="changeRedSelected()" scrollHeight="100px" required>
                    </p-dropdown>
                    <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                        dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="redesList" formControlName="red"
                        optionLabel="nombreRed" (onChange)="changeRedSelected()" scrollHeight="100px" required>
                    </p-dropdown>
                </div>
                <div class="p-field col-6">
                    <label>MicroRed:</label>
                    <p-dropdown *ngIf="!isUpdate" placeholder="Micro Red de salud" class="inputRedondo"
                        [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" inputId="dropdown"
                        [options]="microRedesList" formControlName="microRed" optionLabel="nombreMicroRed"
                        scrollHeight="100px" required>
                    </p-dropdown>
                    <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                        dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="microRedesList"
                        formControlName="microRed" optionLabel="nombreMicroRed" scrollHeight="100px" required>
                    </p-dropdown>
                </div>
            </div>
        </form>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton type="button" label="Cancelar" class="p-button-danger" (click)="canceled()"></button>
        <button *ngIf="!isUpdate" pButton type="button" label="Guardar" (click)="saveForm()"></button>
        <button *ngIf="isUpdate" pButton type="button" label="Guardar" (click)="editarDatos()"></button>
    </ng-template>
</p-dialog>

<!--ENCARGADO DIALOG-->
<p-dialog [(visible)]="encargadoDialog" [style]="{width: '450px'}" [modal]="true" styleClass="p-fluid" autoZIndex>
    <ng-template pTemplate="header">
        <h3 class="m-0">{{tituloEncargado()}}</h3>
    </ng-template>

    <ng-template pTemplate="body">
        <form [formGroup]='formEncargado'>
            <div>
                <div class="grid">
                    <div class="p-field col-6">
                        <label>Tipo Documento:</label>
                        <p-dropdown *ngIf="!isUpdateEncargado" placeholder="Tipo documento" class="inputRedondo"
                            [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" inputId="dropdown" (onChange)="onChangeTipoDocumento()"
                            [options]="tipoDocumentosList" formControlName="tipoDocumento" optionLabel="abreviatura"
                            scrollHeight="100px" required>
                        </p-dropdown>
                        <p-dropdown *ngIf="isUpdateEncargado" class="inputRedondo" [showTransitionOptions]="'300ms'"
                            dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="tipoDocumentosList" (onChange)="onChangeTipoDocumento()"
                            formControlName="tipoDocumento" optionLabel="abreviatura" scrollHeight="200px" required>
                        </p-dropdown>
                    </div>
                    <div class="p-field col-6">
                        <label>Nro Documento:</label>
                        <div class="p-inputgroup">
                            <input type="text" pInputText formControlName='nroDoc' placeholder="Nro Documento" [(maxlength)]="tamanioDocumento">
                            <button *ngIf="!loadingEncargado" type="button" pButton pRipple icon="pi pi-search"
                                (click)="buscarPersonal()" class="p-button-outlined p-button-secondary"></button>
                            <button *ngIf="loadingEncargado" type="button" pButton pRipple icon="pi pi-spin pi-spinner"
                                (click)="buscarPersonal()" class="p-button-outlined p-button-secondary"></button>
                        </div>

                    </div>
                    <div class="p-field col-12">
                        <label>Nombre Personal:</label>
                        <input type="text" pInputText formControlName='nombre' placeholder="Nombre Personal">
                    </div>
                </div>
            </div>
        </form>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton type="button" label="Cancelar" class="p-button-danger" (click)="canceled()"></button>
        <button  pButton type="button" label="Guardar" (click)="saveEncargado()"></button>
        <!-- <button *ngIf="isUpdate" pButton type="button" label="Guardar" (click)="editarEncargado()"></button> -->
    </ng-template>
</p-dialog>

<!--JURISDICCION DIALOG-->
<p-dialog [(visible)]="jurisdiccionDialog" [style]="{width: '1200px'}" [modal]="true" styleClass="p-fluid " autoZIndex>
    <ng-template pTemplate="body">
        <div class="grid">
            <div class="col-4 mt-3">
                <p-card class="m-0 ">
                    <h2>{{tituloJurisdiccion()}}</h2>
                    <form [formGroup]='formJurisdiccion'>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label>Ubigeo:</label>
                                <div class="grid">
                                    <div class="p-inputgroup col-12">
                                        <input type="text" class="inputRedondo" placeholder="Ubigeo" pInputText
                                            formControlName='ubigeo' (blur)="buscarUbigeoJurisdiccion()" required />
                                        <button *ngIf="!loading" type="button" pButton pRipple icon="pi pi-search"
                                            (click)="buscarUbigeoJurisdiccion()"
                                            class="p-button-outlined p-button-secondary"></button>
                                        <button *ngIf="loading" type="button" pButton pRipple
                                            icon="pi pi-spin pi-spinner" (click)="buscarUbigeoJurisdiccion()"
                                            class="p-button-outlined p-button-secondary"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label>Departamento:</label>
                                <p-dropdown *ngIf="!isUpdate" placeholder="Departamento" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down"
                                    inputId="dropdown" [options]="departamentosList" formControlName="departamento"
                                    optionLabel="departamento" (onChange)="selectedDepartamentoJurisdiccion()" required>
                                </p-dropdown>
                                <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                                    dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="departamentosList"
                                    formControlName="departamento" optionLabel="departamento"
                                    (onChange)="selectedDepartamentoJurisdiccion()" required>
                                </p-dropdown>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label>Provincia:</label>
                                <p-dropdown *ngIf="!isUpdate" placeholder="Provincia" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down"
                                    inputId="dropdown" [options]="provinciasList" formControlName="provincia"
                                    optionLabel="provincia" (onChange)="selectedProvinciaJurisdiccion()" required>
                                </p-dropdown>
                                <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                                    dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="provinciasList"
                                    formControlName="provincia" optionLabel="provincia"
                                    (onChange)="selectedProvinciaJurisdiccion()" required>
                                </p-dropdown>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label>Distrito:</label>
                                <p-dropdown *ngIf="!isUpdate" placeholder="Distrito" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down"
                                    inputId="dropdown" [options]="distritosList" formControlName="distrito"
                                    optionLabel="distrito" (onChange)="selectedDistritoJurisdiccion()" required>
                                </p-dropdown>
                                <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                                    dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="distritosList"
                                    formControlName="distrito" optionLabel="distrito"
                                    (onChange)="selectedDistritoJurisdiccion()" required>
                                </p-dropdown>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label>Centro Poblado:</label>
                                <p-dropdown *ngIf="!isUpdate" placeholder="Centro Poblado" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down"
                                    scrollHeight="150px" inputId="dropdown" [options]="CCPPList"
                                    formControlName="centroPoblado" optionLabel="ccpp" [filter]="true" filterBy="ccpp"
                                    required>
                                </p-dropdown>
                                <p-dropdown *ngIf="isUpdate" class="inputRedondo" [showTransitionOptions]="'300ms'"
                                    dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="CCPPList"
                                    scrollHeight="150px" formControlName="centroPoblado" optionLabel="ccpp"
                                    [filter]="true" filterBy="ccpp" required>
                                </p-dropdown>
                            </div>
                        </div>
                    </form>
                    <br />
                    <div class="flex justify-content-end">
                        <button [disabled]="!formJurisdiccion.valid" pButton type="button" label="Guardar"
                            class="m-1 w-9rem" (click)="saveJurisdiccion()"></button>
                        <button pButton type="button" label="Nuevo" icon="pi pi-plus"
                            (click)="guardarNuevaJurisdiccion()" pTooltip="Agregar jurisdiccion" tooltipPosition="right"
                            class="p-button-danger m-1 w-9rem" pRipple></button>
                    </div>

                </p-card>
            </div>
            <div class="col-8">
                <p-table [value]="jurisdicciones" #dt styleClass="p-datatable-gridlines" [rows]="5" [paginator]="true"
                    [autoLayout]="true"
                    currentPageReportTemplate="Mostrando de {first} a {last} de {totalRecords} entradas"
                    [showCurrentPageReport]="true"
                    responsiveLayout="scroll">
                    <ng-template pTemplate="caption">
                        <div class="flex justify-content-between">
                            <h3>Lista de Jurisdicciones de la IPRESS</h3>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                        <tr>
                            <th style="text-align: center">Nro</th>
                            <th style="text-align: center">Ubigeo</th>
                            <th style="text-align: center">Departamento</th>
                            <th style="text-align: center">Provincia</th>
                            <th style="text-align: center">Distrito</th>
                            <th style="text-align: center">Centro Poblado</th>
                            <th style="text-align: center; width:4rem">Acción</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                        <tr style="text-align: center">
                            <td style="text-align: center">{{ rowIndex + 1 }}</td>
                            <td style="text-align: center">{{ rowData.ubigeo }}</td>
                            <td style="text-align: center">{{ rowData.departamento }}</td>
                            <td style="text-align: center">{{ rowData.provincia }}</td>
                            <td style="text-align: center">{{ rowData.distrito }}</td>
                            <td style="text-align: center">{{ rowData.centroPoblado }}</td>
                            <td>
                                <button pButton (click)="eliminarJurisdiccion(rowData)" pTooltip="Eliminar" pRipple
                                    type="button" icon="pi pi-trash" class="p-button-rounded p-button-danger m-1">
                                </button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton type="button" label="Salir" class="m-1 w-5rem" (click)="close()"></button>
    </ng-template>
</p-dialog>
<!--AMBIENTES DIALOG-->
<p-dialog [(visible)]="ambienteDialog" [style]="{width: '1300px'}" [modal]="true" styleClass="p-fluid " autoZIndex>

    <ng-template pTemplate="body">
        <div class="grid">
            <div class="col-4 mt-8">
                <p-card class="m-0 ">
                    <h2>{{tituloAmbiente()}}</h2>
                    <form [formGroup]='formAmbiente'>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="codAmbiente">Codigo Ambiente:</label>
                                <input placeholder="Codigo Ambiente" type="text" pInputText
                                    formControlName='codAmbiente' required />
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="ambiente">Ambiente:</label>
                                <input placeholder="Nombre Ambiente" type="text" pInputText formControlName='ambiente'
                                    required />
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label>Nombre UPS:</label>
                                <p-dropdown *ngIf="!isUpdateAmbiente" placeholder="Nombre UPS" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down"
                                    inputId="dropdown" [options]="UPSList" formControlName="nombreUPS"
                                    optionValue="nombreUPS" optionLabel="nombreUPS" required>
                                </p-dropdown>
                                <p-dropdown *ngIf="isUpdateAmbiente" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down"
                                    inputId="dropdown" [options]="UPSList" formControlName="nombreUPS"
                                    optionLabel="nombreUPS" optionValue="nombreUPS" required>
                                </p-dropdown>
                            </div>
                        </div>
                    </form>
                    <br />
                    <div class="flex justify-content-end">
                        <button *ngIf="!isUpdateAmbiente" [disabled]="!formAmbiente.valid" pButton type="button"
                            label="Guardar" class="m-1 w-9rem" (click)="saveAmbiente()"></button>
                        <button *ngIf="isUpdateAmbiente" [disabled]="!formAmbiente.valid" pButton type="button"
                            label="Guardar" class="m-1 w-9rem" (click)="saveEdicionAmbiente()"></button>
                        <button pButton type="button" label="Nuevo" icon="pi pi-plus" (click)="guardarNuevoAmbiente()"
                            pTooltip="Agregar ambiente" tooltipPosition="right" class="p-button-danger m-1 w-9rem"
                            pRipple></button>
                    </div>

                </p-card>
            </div>
            <div class="col-8">
                <p-table [value]="ambientes" #dt styleClass="p-datatable-gridlines" [rows]="4"
                    [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true" [autoLayout]="true"
                    currentPageReportTemplate="Mostrando de {first} a {last} de {totalRecords} entradas"
                    [showCurrentPageReport]="true"
                    responsiveLayout="scroll">
                    <ng-template pTemplate="caption">
                        <div class="flex justify-content-between">
                            <h3>Lista de Ambientes de la IPRESS</h3>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                        <tr>
                            <th style="text-align: center">Nro</th>
                            <th style="text-align: center">Codigo Ambiente</th>
                            <th style="text-align: center">Ambiente</th>
                            <th style="text-align: center">Nombre UPS</th>
                            <th style="text-align: center; width:8rem">Acción</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                        <tr style="text-align: center">
                            <td style="text-align: center">{{ rowIndex + 1 }}</td>
                            <td style="text-align: center">{{ rowData.codAmbiente }}</td>
                            <td style="text-align: center">{{ rowData.ambiente }}</td>
                            <td style="text-align: center">{{ rowData.nombreUPS }}</td>
                            <td>
                                <button pButton (click)="editarAmbiente(rowData)" pTooltip="Editar" pRipple
                                    type="button" icon="pi pi-pencil" class="p-button-rounded m-1">
                                </button>
                                <button pButton (click)="eliminarAmbiente(rowData)" pTooltip="Eliminar" pRipple
                                    type="button" icon="pi pi-trash" class="p-button-rounded p-button-danger m-1">
                                </button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton type="button" label="Salir" class="m-1 w-5rem" (click)="close()"></button>
    </ng-template>
</p-dialog>
<!--TURNOS DIALOG-->
<p-dialog [(visible)]="turnoDialog" [style]="{width: '1200px'}" [modal]="true" styleClass="p-fluid " autoZIndex>

    <ng-template pTemplate="body">
        <div class="grid">
            <div class="col-4 mt-2">
                <p-card class="m-0 ">
                    <h2>{{tituloTurno()}}</h2>
                    <form [formGroup]='formTurno'>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="turno">Turno:</label>
                                <p-dropdown *ngIf="!isUpdateTurno" placeholder="Tipo de turno" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down"
                                    inputId="dropdown" [options]="tipoTurnosList" formControlName="nombre"
                                    optionLabel="nombre" (onChange)="selectedTipoTurno()" required>
                                </p-dropdown>
                                <p-dropdown *ngIf="isUpdateTurno" class="inputRedondo" [showTransitionOptions]="'300ms'"
                                    dropdownIcon="pi pi-chevron-down" inputId="dropdown" [options]="tipoTurnosList"
                                    formControlName="nombre" optionLabel="nombre" (onChange)="selectedTipoTurno()"
                                    required>
                                </p-dropdown>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="nroHoras">Nro Horas:</label>
                                <input type="text" pInputText formControlName='nroHoras' disabled required />
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="horaInicio">Hora Inicio:</label>
                                <p-calendar formControlName='horaInicio' showTime="true" hourFormat="24"
                                    [timeOnly]="true" (onSelect)="selectedHoraInicio()" required></p-calendar>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="horaFin">Hora Fin:</label>
                                <p-calendar formControlName='horaFin' [timeOnly]="true" showTime="true" hourFormat="24"
                                    required></p-calendar>
                            </div>
                        </div>
                    </form>
                    <br />
                    <div class="flex justify-content-end">
                        <button *ngIf="!isUpdateTurno" pButton type="button" label="Guardar" class="m-1 w-9rem"
                            (click)="saveTurno()"></button>
                        <button *ngIf="isUpdateTurno" pButton type="button" label="Guardar" class="m-1 w-9rem"
                            (click)="saveEdicionTurno()"></button>
                        <button pButton type="button" label="Nuevo" icon="pi pi-plus" (click)="guardarNuevoTurno()"
                            pTooltip="Agregar turno" tooltipPosition="right" class="p-button-danger m-1 w-9rem"
                            pRipple></button>
                    </div>

                </p-card>
            </div>
            <div class="col-8">
                <p-table [value]="turnos" #dt styleClass="p-datatable-gridlines" [rows]="10"
                    [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true" [autoLayout]="true"
                    currentPageReportTemplate="Mostrando de {first} a {last} de {totalRecords} entradas"
                    [showCurrentPageReport]="true" responsiveLayout="scroll">
                    <ng-template pTemplate="caption">
                        <div class="flex justify-content-between">
                            <h3>Lista de Turnos de la IPRESS</h3>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                        <tr>
                            <th style="text-align: center">Nro</th>
                            <th style="text-align: center">Nombre</th>
                            <th style="text-align: center">Abreviatura </th>
                            <th style="text-align: center">Nro Horas</th>
                            <th style="text-align: center">Hora Inicio</th>
                            <th style="text-align: center">Hora Fin</th>
                            <th style="text-align: center; width:8rem">Acción</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                        <tr style="text-align: center">
                            <td style="text-align: center">{{ rowIndex + 1 }}</td>
                            <td style="text-align: center">{{ rowData.nombre }}</td>
                            <td style="text-align: center">{{ rowData.abreviatura }}</td>
                            <td style="text-align: center">{{ rowData.nroHoras }}</td>
                            <td style="text-align: center">{{ rowData.horaInicio }}</td>
                            <td style="text-align: center">{{ rowData.horaFin }}</td>
                            <td>
                                <button pButton (click)="editarTurno(rowData)" pTooltip="Editar" pRipple type="button"
                                    icon="pi pi-pencil" class="p-button-rounded m-1">
                                </button>
                                <button pButton (click)="eliminarTurno(rowData)" pTooltip="Eliminar" pRipple
                                    type="button" icon="pi pi-trash" class="p-button-rounded p-button-danger m-1">
                                </button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton type="button" label="Salir" class="m-1 w-5rem" (click)="close()"></button>
    </ng-template>
</p-dialog>

<!--ROLES DIALOG-->
<p-dialog [(visible)]="rolDialog" [style]="{width: '1200px'}" [modal]="true" styleClass="p-fluid " autoZIndex>
    <ng-template pTemplate="body">
        <div class="grid">
            <div class="col-4 mt-2">
                <p-card class="m-0 ">
                    <h2>{{tituloRol()}}</h2>
                    <form [formGroup]='formRol'>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label>Nombre UPS:</label>
                                <p-dropdown *ngIf="!isUpdateRol" placeholder="Nombre UPS" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" (onChange)="onChangeUPS()"
                                    inputId="dropdown" [options]="UPSList" formControlName="nombreUPS"
                                    optionLabel="nombreUPS" required>
                                </p-dropdown>
                                <p-dropdown *ngIf="isUpdateRol" class="inputRedondo"
                                    [showTransitionOptions]="'300ms'" dropdownIcon="pi pi-chevron-down" (onChange)="onChangeUPS()"
                                    inputId="dropdown" [options]="UPSList" formControlName="nombreUPS"
                                    optionLabel="nombreUPS" required>
                                </p-dropdown>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="nombreFuncion">Nombre funcion:</label>
                                <input type="text" pInputText formControlName='nombreFuncion' placeholder="Nombre de la Función" disabled/>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="tiempoPreparacion">Tiempo preparación:</label>
                                <p-inputNumber placeholder="Tiempo de preparación" formControlName='tiempoPreparacion' suffix=" minutos" required>
                                </p-inputNumber>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="tiempoPromedioAtencion">Tiempo promedio atención:</label>
                                <p-inputNumber placeholder="Tiempo promedio de atención" formControlName='tiempoPromedioAtencion' suffix=" minutos" required>
                                </p-inputNumber>
                            </div>
                        </div>
                        <div class="p-fluid grid flex justify-content-center">
                            <div class="p-field col-12 md:col-12">
                                <label id="fechaRegistro">Fecha Registro:</label>
                                <input type="date" placeholder="Fecha Registro" pInputText
                                    formControlName='fechaRegistro' required />
                            </div>
                        </div>
                    </form>
                    <br />
                    <div class="flex justify-content-end">
                        <button *ngIf="!isUpdateRol" pButton type="button" label="Guardar" class="m-1 w-9rem"
                            (click)="saveRol()"></button>
                        <button *ngIf="isUpdateRol" pButton type="button" label="Guardar" class="m-1 w-9rem"
                            (click)="saveEdicionRol()"></button>
                        <button pButton type="button" label="Nuevo" icon="pi pi-plus" (click)="guardarNuevoRol()"
                            pTooltip="Agregar rol" tooltipPosition="right" class="p-button-danger m-1 w-9rem"
                            pRipple></button>
                    </div>

                </p-card>
            </div>
            <div class="col-8">
                <p-table [value]="roles" #dt styleClass="p-datatable-gridlines" [rows]="10"
                    [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true" [autoLayout]="true"
                    currentPageReportTemplate="Mostrando de {first} a {last} de {totalRecords} entradas"
                    [showCurrentPageReport]="true" responsiveLayout="scroll">
                    <ng-template pTemplate="caption">
                        <div class="flex justify-content-between">
                            <h3>Lista de Roles de IPRESS</h3>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                        <tr>
                            <th style="text-align: center">Nro</th>
                            <th style="text-align: center">UPS </th>
                            <th style="text-align: center">Nombre Función</th>
                            <th style="text-align: center">Tiempo preparacion</th>
                            <th style="text-align: center">Tiempo promedio atención</th>
                            <th style="text-align: center">Fecha Registro</th>
                            <th style="text-align: center; width:8rem">Acción</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                        <tr style="text-align: center">
                            <td style="text-align: center">{{ rowIndex + 1 }}</td>
                            <td style="text-align: center">{{ buscarNombreUPS(rowData.codUPS) }}</td>
                            <td style="text-align: center">{{ rowData.nombreFuncion }}</td>
                            <td style="text-align: center">{{ rowData.tiempoPreparacion }}</td>
                            <td style="text-align: center">{{ rowData.tiempoPromedioAtencion }}</td>
                            <td style="text-align: center">{{ rowData.fechaRegistro | date: "dd/MM/yyyy" }}</td>
                            <td>
                                <button pButton (click)="editarRol(rowData)" pTooltip="Editar" pRipple type="button"
                                    icon="pi pi-pencil" class="p-button-rounded m-1">
                                </button>
                                <button pButton (click)="eliminarRol(rowData)" pTooltip="Eliminar" pRipple
                                    type="button" icon="pi pi-trash" class="p-button-rounded p-button-danger m-1">
                                </button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton type="button" label="Salir" class="m-1 w-5rem" (click)="close()"></button>
    </ng-template>
</p-dialog>