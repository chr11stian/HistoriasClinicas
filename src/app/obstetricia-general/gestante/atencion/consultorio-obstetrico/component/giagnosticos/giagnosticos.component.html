<div class="p-card">
    <div class="diagnosticos">
        <p-toolbar>
            <ng-template pTemplate="left">
                <h3 class="mt-2">DIAGNÓSTICO</h3>
            </ng-template>

            <ng-template pTemplate="right" class="button">
                <button class="button-agregar" icon="pi pi-save" pButton type="button" label="Guardar"
                    (click)="guardarTodosDatos()"></button>
            </ng-template>
        </p-toolbar>
        <ng-template pTemplate="right" class="button">
            <button pButton pRipple label="Atras" icon="pi pi-angle-left" class="p-button-secondary mr-2"></button>
            <button pButton pRipple label="Siguiente" iconPos="right" icon="pi pi-angle-right" class="guardar mr-2"
                style="background-color: #0c3866"></button>
        </ng-template>
        <br>
        <p-table class="table-over" [value]="diagnosticos" #dt styleClass="p-datatable-gridlines" [rows]="10"
            [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true" [autoLayout]="true" [showCurrentPageReport]="true"
            currentPageReportTemplate="Mostrando {first} de {last} de {totalRecords} entradas">
            <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                <tr>
                    <th style="text-align: center" class="font-2">Nro </th>
                    <th style="text-align: center" class="font-1">CIE 10 SIS</th>
                    <th style="text-align: center" class="font-2">DIAGNOSTICOS SIS</th>
                    <th style="text-align: center" class="font-2">TIPO</th>
                    <th style="text-align: center" class="font-2">ACCIÓN</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                <tr>
                    <td style="text-align: center" class="font-2">{{ rowIndex + 1 }}</td>
                    <td style="text-align: center">{{ rowData.cie10SIS }}</td>
                    <td style="text-align: center">{{ rowData.diagnosticoSIS }}</td>
                    <td style="text-align: center">{{ rowData.tipo }}</td>
                    <td style="text-align: center">
                        <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger m-1"
                            (click)="eliminarDx(rowIndex)" pTooltip="Eliminar">
                        </button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <p-toolbar>
            <ng-template pTemplate="right" class="button">
                <button pButton pRipple label="Agregar Diagnóstico" icon="pi pi-plus" pButton type="button"
                    class="button-agregar" (click)="openDiagnostico()"></button>
            </ng-template>
        </p-toolbar>
    </div>
    <br>
    <div class="grid">
        <div class="col-12 xs:col-12 md:col-12 lg:col-6 xl:col-6">
            <div class="orientaciones">
                <p-toolbar>
                    <ng-template pTemplate="left">
                        <h3 class="p-m-0">ORIENTACIONES</h3>
                    </ng-template>
                </p-toolbar>
                <p-table class="table-over" [value]="orientaciones" #dt styleClass="p-datatable-gridlines" [rows]="10"
                    [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true" [autoLayout]="true"
                    [showCurrentPageReport]="true"
                    currentPageReportTemplate="Mostrando {first} de {last} de {totalRecords} entradas">
                    <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                        <tr>
                            <th style="text-align: center" class="font-2">Nro </th>
                            <th style="text-align: center" class="font-1">CIE 10</th>
                            <th style="text-align: center" class="font-2">CONSEJERIAS</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                        <tr>
                            <td style="text-align: center" class="font-2">{{ rowIndex + 1 }}</td>
                            <td style="text-align: center">{{ rowData.cie10 }}</td>
                            <td style="text-align: center">{{ rowData.consejeria }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="col-12 xs:col-12 md:col-12 lg:col-6 xl:col-6">
            <div class="otros">
                <form [formGroup]='formOtrosDatos'>
                    <br>
                    <!-- <p-fieldset legend="REFERENCIA">
                        <div class="grid p-fluid">
                            <div class="col:12 lg:col-4 md:col-4 xs:col-12 p-field">
                                <label>Consultorio:</label>
                                <input type="text" pInputText formControlName="consultorio" />
                            </div>
                            <div class="col:12 lg:col-4 md:col-4 xs:col-12 p-field">
                                <label>Motivo:</label>
                                <input type="text" pInputText formControlName="motivo" />
                            </div>
                            <div class="col:12 lg:col-4 md:col-4 xs:col-12 p-field">
                                <label>Cod. Renaes:</label>
                                <input type="text" pInputText formControlName="codRENAES" />
                            </div>
                        </div>
                    </p-fieldset>
                    <br> -->
                    <p-fieldset legend="PROXIMA CITA">
                        <div class="grid ">
                            <div class="col-6">
                                <p-calendar [showIcon]="true" dateFormat="yy-mm-dd" formControlName="proxCita"
                                    inputId="icon">
                                </p-calendar>
                            </div>
                            <div class="col-6">
                                <p-button label="Ver cronograma citas" icon="pi pi-calendar-plus"
                                    (click)="mostrarCronograma()"></p-button>
                            </div>
                        </div>
                    </p-fieldset>
                    <br>
                    <p-fieldset legend="DATOS ADICIONALES">
                        <div class="grid p-fluid">
                            <div class="col-12 p-field">
                                <label>Plan de Parto:</label>
                                <div class="p-field">
                                    <p-dropdown inputId="dropdown" [options]="planPartoList"
                                        formControlName="planPartoReenfocada" placeholder="seleccionar"
                                        optionLabel="label" optionValue="value" defaultLabel="Seleccione:">
                                    </p-dropdown>
                                </div>
                            </div>
                            <div class="col-12 p-fluid p-field">
                                <label>Visita Domiciliaria:</label>
                                <div class="col-12 p-field">
                                    <p-dropdown inputId="dropdown" [options]="visitaDomiciliariaList"
                                        [(ngModel)]="eleccion" formControlName="visita" placeholder="seleccionar"
                                        optionLabel="label" optionValue="value" defaultLabel="Seleccione:">
                                    </p-dropdown>
                                </div>
                            </div>
                            <div class="col-12 p-fluid p-field">
                                <label *ngIf="eleccion=='SI'">Fecha Visita:</label><br>
                                <p-calendar *ngIf="eleccion=='SI'" type="Date" showIcon="true"
                                    formControlName='fechaVisita' dateFormat="yy-mm-dd" [showTime]="true"
                                    [showSeconds]="true" inputId="time">
                                </p-calendar>
                            </div>
                        </div>
                        <br>
                    </p-fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
<!--*************************DIALOGO AGREGAR Diagnosticosss***********************************-->
<p-dialog [(visible)]="diagnosticoDialog" [modal]="true" [style]="{width: '580px',heigth:'400px'}">
    <ng-template pTemplate="header">
        <h3>DIAGNOSTICOS</h3>
    </ng-template>
    <form [formGroup]='form'>
        <div class="grid mt-2 ">
            <div class="col-6 ">
                <p-fieldset legend="DIAGNOSTICO SIS">
                    <div class="grid mt-2">
                        <label>Diagnóstico: </label>
                        <p-autoComplete [suggestions]="listaDeCIE" (completeMethod)="filterCIE10($event)"
                            appendTo="body" field="descripcionItem" [minLength]="1" class="areaText "
                            class="inputfield p-fluid w-full" formControlName="autocompleteSIS"
                            (onSelect)="selectedOptionNameCIE($event,0)">
                        </p-autoComplete>
                        <textarea [rows]="3" class="inputfield w-full mt-2" formControlName="diagnosticoSIS"
                            pInputTextarea disabled></textarea>
                    </div>
                    <div class="grid mt-2 ">
                        <label class="mr-2">CIE 10: </label>
                        <p-autoComplete formControlName="SISCIE" [suggestions]="listaDeCIE"
                            (completeMethod)="filterCIE10($event)" field="codigoItem" [minLength]="1"
                            class="inputfield p-fluid w-full" (onSelect)="selectedOption($event,0)" class=""
                            [forceSelection]="true" dataKey="codigoItem">
                        </p-autoComplete>
                    </div>
                </p-fieldset>
            </div>
            <div class="col-6">
                <p-fieldset legend="DIAGNOSTICO HIS">
                    <div class="grid mt-2">
                        <label>Diagnóstico: </label>
                        <p-autoComplete [suggestions]="listaDeCIE" (completeMethod)="filterCIE10($event)"
                            appendTo="body" field="descripcionItem" [minLength]="1" class="areaText "
                            class="inputfield p-fluid w-full" formControlName="autocompleteHIS"
                            (onSelect)="selectedOptionNameCIE($event,1)">
                        </p-autoComplete>
                        <textarea [rows]="3" class="inputfield w-full mt-2" formControlName="diagnosticoHIS"
                            pInputTextarea disabled></textarea>
                    </div>
                    <div class="grid mt-2">
                        <label class="mr-2">CIE 10: </label>
                        <p-autoComplete formControlName="HISCIE" [suggestions]="listaDeCIE"
                            (completeMethod)="filterCIE10($event)" field="codigoItem" [minLength]="1"
                            class="inputfield p-fluid w-full" (onSelect)="selectedOption($event,1)" class=""
                            [forceSelection]="true" dataKey="codigoItem">
                        </p-autoComplete>
                    </div>
                </p-fieldset>
            </div>
            <div class="col-4">
                <label>Tipo diagnostico:</label>
                <p-dropdown inputId="dropdown" [options]="tipoList" formControlName="tipo" placeholder="seleccionar"
                    optionLabel="label" optionValue="value" defaultLabel="Seleccione:" appendTo="body"
                    class="inputfield p-fluid w-full">
                </p-dropdown>
            </div>
            <div class="col-8">
                <label>Prestacion:</label>
                <p-dropdown inputId="dropdown" [options]="prestacionList" formControlName="prestacion"
                    placeholder="seleccionar" optionLabel="descripcion" defaultLabel="Seleccione:" appendTo="body"
                    class="inputfield p-fluid w-full">
                </p-dropdown>
            </div>
        </div>
    </form>
    <ng-template pTemplate="footer">
        <button pButton type="button" label="Cancelar" class="button-cancelar" icon="pi pi-times"
            (click)="canceled1()"></button>
        <button class="button-agregar" icon="pi pi-save" pButton type="button" label="Guardar"
            (click)="save1(formTemplate)"></button>
    </ng-template>

</p-dialog>
<!-- dialogo para cronograma citas -->

<p-dialog [(visible)]="cronogramaDialog" [style]="{width: '580px',heigth:'400px'}" [modal]="true">
    <ng-template pTemplate="header">
        <h3>CRONOGRAMA DE CITAS DE LA GESTANTE</h3>
    </ng-template>
    <ng-template pTemplate="body">
        <div class="grid" class="m-3">
            <p-table [value]="cronograma">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="text-align: center">Nro</th>
                        <th style="text-align: center">Descripción</th>
                        <th style="text-align: center">Tipo</th>
                        <th style="text-align: center">Fecha</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-data let-rowIndex="rowIndex">
                    <tr [ngClass]="{'row-faltantes': funcionAuxiliar(data.fecha) > hoy}">
                        <td style="text-align: center">{{ rowIndex + 1 }}</td>
                        <td style="text-align: center">{{ data.descripcion }}</td>
                        <td style="text-align: center">{{ data.tipo }}</td>
                        <td style="text-align: center">{{ data.fecha }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <button pButton type="button" label="Salir" class="p-button-danger" (click)="salirCronograma()"></button>
    </ng-template>
</p-dialog>