<div class="p-card">
    <div class="diagnosticos">
        <p-toolbar>
            <ng-template pTemplate="left">
                <h3 class="mt-2">DIAGNÓSTICO</h3>
            </ng-template>

            <!-- <ng-template pTemplate="right" class="button">
                <button class="button-agregar" icon="pi pi-save" pButton type="button" label="Guardar"
                    (click)="guardarTodosDatos()"></button>
            </ng-template> -->
        </p-toolbar>
        <ng-template pTemplate="right" class="button">
            <button pButton pRipple label="Atras" icon="pi pi-angle-left" class="p-button-secondary mr-2"></button>
            <button pButton pRipple label="Siguiente" iconPos="right" icon="pi pi-angle-right" class="guardar mr-2"
                style="background-color: #0c3866"></button>
        </ng-template>
        <br>
        <!-- <div class="grid">
            <div class="col-12 xs:col-12 md:col-10 lg:col-10 xl:col-10">
                <p-fieldset legend="ATENCIÓN INTEGRAL">
                    <form [formGroup]='form2'>
                        <div>
                            <div class="grid">
                                <div class="col-12 md:col-7 lg:col-7 p-field">
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-8" style="text-align: right">Orientación y consejería signos de
                                            alarma:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="OrientaciónConsejeríaSignosAlarma">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-8" style="text-align: right">Consejería en enfermedades
                                            comunes:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="ConsejeríaEnfermedadesComunes">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-8" style="text-align: right">Sospechas de tuberculosis:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="SospechasTuberculosis">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-8" style="text-align: right">Infecciones de transmisión
                                            sexual:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="InfeccionesTransmisiónSexual">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-8" style="text-align: right">Orientación nutricional:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="OrientaciónNutricional">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-8" style="text-align: right">Orientación en planificaión
                                            familiar:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="OrientaciónPlanificaiónFamiliar">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-8" style="text-align: right">Orientación en prevención de
                                            cáncer ginecológico:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="OrientaciónPrevenciónDeCancerGinecológico">
                                        </p-selectButton>
                                    </div>
                                </div>
                                <div class="col-12 md:col-5 lg:col-5 p-field">

                                    <div class="p-inputgroup mb-2">
                                        <span class="col-9" style="text-align: right">Orientación y consej. Pretest.
                                            VIH:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="OrientaciónConsejeriaPretestVIH">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-9" style="text-align: right">Orientación y consej. Postest.
                                            VIH:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="OrientaciónConsejeriaPostestVIH">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-9" style="text-align: right">Consejería en estilos de vida
                                            saludable:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="OrientaciónEnEstilosDeVidaSaludable">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-9" style="text-align: right">Orientación al acompañante:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="OrientaciónAcompañante">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-9" style="text-align: right">Violencia intrafamiliar:</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="ViolenciaFamiliar">
                                        </p-selectButton>
                                    </div>
                                    <div class="p-inputgroup mb-2">
                                        <span class="col-9" style="text-align: right">Plan de parto</span>
                                        <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                                            formControlName="PlanDeParto">
                                        </p-selectButton>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </p-fieldset>
            </div>
            <div class="col-12 xs:col-12 md:col-2 lg:col-2 xl:col-2">
                <div class="otros">
                    <form [formGroup]='formOtrosDatos'>
                        <p-fieldset legend="DATOS ADICIONALES">
                            <div class="grid p-fluid">
                                <div class="col-12 p-field">
                                    <label>Plan de Parto:</label>
                                    <div class="p-field">
                                        <p-dropdown inputId="dropdown" [options]="planPartoList"
                                            formControlName="planPartoReenfocada" placeholder="seleccionar"
                                            optionLabel="label" optionValue="value" defaultLabel="Seleccione:">
                                        </p-dropdown>
                                    </div>
                                </div>
                                <div class="col-12 p-fluid p-field">
                                    <label>Visita Domiciliaria:</label>
                                    <div class="col-12 p-field">
                                        <p-dropdown inputId="dropdown" [options]="visitaDomiciliariaList"
                                            [(ngModel)]="eleccion" formControlName="visita" placeholder="seleccionar"
                                            optionLabel="label" optionValue="value" defaultLabel="Seleccione:">
                                        </p-dropdown>
                                    </div>
                                </div>
                                <div class="col-12 p-fluid p-field">
                                    <label *ngIf="eleccion=='SI'">Fecha Visita:</label><br>
                                    <p-calendar *ngIf="eleccion=='SI'" type="Date" showIcon="true"
                                        formControlName='fechaVisita' dateFormat="yy-mm-dd" [showTime]="true"
                                        [showSeconds]="true" inputId="time">
                                    </p-calendar>
                                </div>
                            </div>
                            <br>
                        </p-fieldset>
                    </form>
                </div>
            </div>
        </div> -->




        <!-- <p-toolbar>
            <ng-template pTemplate="left">
                <h3 class="mt-2">DIAGNÓSTICO</h3>
            </ng-template>
            <ng-template pTemplate="right" class="button">
                <button pButton pRipple label="Agregar Diagnóstico" icon="pi pi-plus" pButton type="button"
                    class="button-agregar" (click)="openDiagnostico()"></button>
            </ng-template>
        </p-toolbar>
        <p-table class="table-over" [value]="diagnosticos" #dt styleClass="p-datatable-gridlines" [rows]="10"
            [rowsPerPageOptions]="[10, 25, 50]" [paginator]="true" [autoLayout]="true" [showCurrentPageReport]="true"
            currentPageReportTemplate="Mostrando {first} de {last} de {totalRecords} entradas">
            <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                <tr>
                    <th style="text-align: center" class="font-2">Nro </th>
                    <th style="text-align: center" class="font-1">COD. PRESTACION</th>
                    <th style="text-align: center" class="font-1">CIE 10 SIS</th>
                    <th style="text-align: center" class="font-2">DIAGNOSTICOS SIS</th>
                    <th style="text-align: center" class="font-1">CIE 10 HIS</th>
                    <th style="text-align: center" class="font-2">DIAGNOSTICOS HIS</th>
                    <th style="text-align: center" class="font-2">TIPO</th>
                    <th style="text-align: center" class="font-2">ACCIÓN</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                <tr>
                    <td style="text-align: center" class="font-2">{{ rowIndex + 1 }}</td>
                    <td style="text-align: center">{{ rowData.codPrestacion }}</td>
                    <td style="text-align: center">{{ rowData.cie10SIS }}</td>
                    <td style="text-align: center">{{ rowData.diagnosticoSIS }}</td>
                    <td style="text-align: center">{{ rowData.cie10HIS }}</td>
                    <td style="text-align: center">{{ rowData.diagnosticoHIS }}</td>
                    <td style="text-align: center">{{ rowData.tipo }}</td>
                    <td style="text-align: center">
                        <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded m-1"
                            (click)="editarDx(rowData)" pTooltip="Editar">
                        </button>
                        <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger m-1"
                            (click)="eliminarDx(rowData.cie10SIS)" pTooltip="Eliminar">
                        </button>
                    </td>
                </tr>
            </ng-template>
        </p-table> -->
    </div><br>
</div>
<!--*************************DIALOGO AGREGAR Diagnosticosss***********************************-->
<!-- <p-dialog [(visible)]="diagnosticoDialog" [modal]="true" [style]="{width: '780px',heigth:'400px'}">
    <ng-template pTemplate="header">
        <h3>DIAGNOSTICOS</h3>
    </ng-template>
    <form [formGroup]='form'>
        <div class="grid mt-2 ">
            <div class="col-7">
                <label>Prestacion:</label>
                <p-dropdown inputId="dropdown" [options]="prestacionList" formControlName="prestacion"
                    placeholder="Seleccionar" optionLabel="descripcion" defaultLabel="Seleccione:" appendTo="body"
                    class="inputfield p-fluid w-full" (onChange)="onChangePrestacion()">
                </p-dropdown>
            </div>
            <div class="col-5">
                <label>Nombre UPS:</label>
                <p-dropdown [options]="listaUps" formControlName="ups" appendTo="body" optionLabel="nombreUPS"
                    optionValue="nombreUPS" class="inputfield p-fluid w-full" placeholder="Seleccione"></p-dropdown>
            </div>
            <div class="col-6">
                <label>Nombre UPS aux:</label>
                <p-dropdown [options]="listaUpsHis" formControlName="subtitulo" appendTo="body" optionLabel="nombreUPS"
                    optionValue="nombreUPS" class="inputfield p-fluid w-full" placeholder="Seleccione"></p-dropdown>
            </div>
            <div class="col-2">
                <label>Tipo diagnostico:</label>
                <p-dropdown inputId="dropdown" [options]="tipoList" formControlName="tipo" placeholder="Seleccione"
                    optionLabel="label" optionValue="value" defaultLabel="Seleccione:" appendTo="body"
                    class="inputfield p-fluid w-full">
                </p-dropdown>
            </div>
            <div class="col-2">
                <label>Lab:</label>
                <input type="text" pInputText formControlName='lab' placeholder="Lab"
                    class="p-fluid inputfield w-full">
            </div>
            <div class="col-2 p-fluid">
                <label>Patologia:</label>
                <p-selectButton [options]="opciones" optionLabel="name" optionValue="boleano"
                    formControlName="patologiaMaterna">
                </p-selectButton>
            </div>
            <div class="col-6 ">
                <p-fieldset legend="DIAGNOSTICO SIS">
                    <div class="grid mt-2">
                        <label>Diagnóstico: </label>
                        <p-dropdown [options]="listaDeCIESIS" formControlName="autocompleteSIS" appendTo="body"
                            optionLabel="diagnostico" class="inputfield p-fluid w-full" placeholder="Seleccione"
                            (onChange)="selectedOptionNameCIE($event,0)"></p-dropdown>
                        <textarea [rows]="3" class="inputfield w-full mt-2" formControlName="diagnosticoSIS"
                            pInputTextarea disabled></textarea>
                    </div>
                    <div class="grid mt-2 ">
                        <label class="mr-2">CIE 10: </label>
                        <p-dropdown [options]="listaDeCIESIS" formControlName="SISCIE" appendTo="body"
                            optionLabel="cie10" class="inputfield p-fluid w-full" placeholder="Seleccione"
                            (onChange)="selectedOption($event,0)"></p-dropdown>
                    </div>
                </p-fieldset>
            </div>
            <div class="col-6">
                <p-fieldset legend="DIAGNOSTICO HIS">
                    <div class="grid mt-2">
                        <label>Diagnóstico: </label>
                        <p-autoComplete [suggestions]="listaDeCIE" (completeMethod)="filterCIE10($event)"
                            appendTo="body" field="descripcionItem" [minLength]="1" class="areaText "
                            class="inputfield p-fluid w-full" formControlName="autocompleteHIS"
                            (onSelect)="selectedOptionNameCIE($event,1)">
                        </p-autoComplete>
                        <textarea [rows]="3" class="inputfield w-full mt-2" formControlName="diagnosticoHIS"
                            pInputTextarea disabled></textarea>
                    </div>
                    <div class="grid mt-2">
                        <label class="mr-2">CIE 10: </label>
                        <p-autoComplete formControlName="HISCIE" [suggestions]="listaDeCIE"
                            (completeMethod)="filterCIE10($event)" field="codigoItem" [minLength]="1"
                            class="inputfield p-fluid w-full" (onSelect)="selectedOption($event,1)"
                            class="inputfield p-fluid w-full" [forceSelection]="true" dataKey="codigoItem">
                        </p-autoComplete>
                    </div>
                </p-fieldset>
            </div>
        </div>
    </form>
    <ng-template pTemplate="footer">
        <button pButton type="button" label="Cancelar" class="button-cancelar" icon="pi pi-times"
            (click)="canceled1()"></button>
        <button *ngIf="!isUpdate" class="button-agregar" icon="pi pi-save" pButton type="button" label="Guardar"
            (click)="save1(formTemplate)"></button>
        <button *ngIf="isUpdate" class="button-agregar" icon="pi pi-save" pButton type="button" label="Guardar"
            (click)="saveActualizarDiagnostico(formTemplate)"></button>
    </ng-template>

</p-dialog> -->

<div class="grid">
    <div class="col-6">
        <p-panel header="FUA" class="diagnostic-panel">
            <form [formGroup]="fuaForm">
                <div class="grid">
                    <div class="col-6 p-fluid">
                        <label>Prestación:</label>
                        <p-dropdown inputId="dropdown" #dropdownPres [options]="arrayPrestation"
                            formControlName="prestacion" placeholder="Seleccionar" optionLabel="descripcion"
                            defaultLabel="Seleccione:" appendTo="body" class="inputfield p-fluid w-full"
                            (onChange)="onChangePrestacion()">
                        </p-dropdown>
                    </div>
                    <div class="col-6 p-fluid">
                        <label>Tipo Diagnóstico:</label>
                        <p-dropdown inputId="dropdown" [options]="arrayDiagnosticType"
                            formControlName="tipoDiagnosticoFUA" placeholder="Seleccionar" optionLabel="label"
                            optionValue="value" defaultLabel="Seleccione:" appendTo="body"
                            class="inputfield p-fluid w-full" (onChange)="onChangePrestacion()">
                        </p-dropdown>
                    </div>
                    <div class="col-12 p-fluid">
                        <label>Diagnóstico SIS:</label>
                        <p-dropdown [options]="arrayFuaDiagnostic" formControlName="diagnosticoFUA"
                            placeholder="Seleccionar un Procedimiento" optionLabel="diagnostico"
                            (onChange)="onchangeSIS($event)">
                        </p-dropdown>
                    </div>
                    <div class="col-9 p-fluid">
                        <label>Código de procedimiento SIS: </label>
                        <p-dropdown [options]="arrayFuaDiagnostic" formControlName="codCIE10SIS" appendTo="body"
                            optionLabel="cie10" class="inputfield p-fluid w-full" placeholder="Seleccione"
                            (onChange)="onchangeSIS($event)">
                        </p-dropdown>
                    </div>
                    <div class="col-3 agregate-div ">
                        <button pButton pRipple icon="pi pi-plus" pButton type="button"
                            style="background-color: #0c3866" label="Agregar" class="add-button p-button-rounded"
                            (click)="agregateDiagnosticFUA()"></button>
                    </div>
                    <div class="col-12 p-fluid">
                        <textarea style="text-transform:uppercase" rows="3" cols="30" pInputTextarea
                            formControlName="diagnosticoSIS"></textarea>
                    </div>
                </div>
            </form>
            <p-table class="table-over" [value]="arrayDiagnosticFUA" #dt styleClass="p-datatable-gridlines" [rows]="10">
                <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                    <tr>
                        <th style="text-align: center;" class="font-2">Nro</th>
                        <th style="text-align: center;" class="font-2">Cod Prestación</th>
                        <th style="text-align: center;" class="font-1">Diagnóstico</th>
                        <th style="text-align: center;" class="font-2">CIE 10</th>
                        <th style="text-align: center;" class="font-2">Tipo Diagnóstico</th>
                        <th style="text-align: center" class="font-2">Acción</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-i="rowIndex">
                    <tr>
                        <td style="text-align: center;" class="font-2">{{ i + 1 }}</td>
                        <td style="text-align: center;">{{ rowData.codPrestacion }}</td>
                        <td style="text-align: center;">{{ rowData.diagnostico }}</td>
                        <td style="text-align: center;">{{ rowData.CIE10 }}</td>
                        <td style="text-align: center;">{{ rowData.tipoDiagnostico }}</td>
                        <td style="text-align: center">
                            <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger m-1"
                                (click)="deleteItemOfArray(i,0)" pTooltip="Eliminar" tooltipPosition="top"></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </p-panel>
    </div>
    <div class="col-6">
        <p-panel header="HIS" class="diagnostic-panel">
            <form [formGroup]="hisForm">
                <div class="grid">
                    <div class="col-4 p-fluid">
                        <label>Nombre UPS:</label>
                        <p-dropdown inputId="dropdown" [options]="arrayUPS" formControlName="nombreUPS"
                            placeholder="Seleccionar" optionLabel="nombreUPS" defaultLabel="Seleccione:" appendTo="body"
                            class="inputfield p-fluid w-full">
                        </p-dropdown>
                    </div>
                    <div class="col-4 p-fluid">
                        <label>Sub Título UPS:</label>
                        <p-dropdown inputId="dropdown" [options]="arrayUPSAux" formControlName="nombreUPSAux"
                            placeholder="Seleccionar" optionLabel="nombre" defaultLabel="Seleccione:" appendTo="body"
                            class="inputfield p-fluid w-full">
                        </p-dropdown>
                    </div>
                    <div class="col-3 p-fluid">
                        <label>Tipo Diagnóstico:</label>
                        <p-dropdown inputId="dropdown" [options]="arrayDiagnosticType"
                            formControlName="tipoDiagnosticoHIS" placeholder="Seleccionar" optionLabel="label"
                            optionValue="value" defaultLabel="Seleccione:" appendTo="body"
                            class="inputfield p-fluid w-full">
                        </p-dropdown>
                    </div>
                    <div class="col-1 md:col-3 lg:col-1 p-field">
                        <div class="">
                            <label class="">Lab: </label>
                            <input type="text" pInputText class="inputfield w-full bg_color" formControlName="lab"
                                oninput="this.value=this.value.toUpperCase()">
                        </div>
                    </div>
                    <div class="col-12 p-fluid">
                        <label>Diagnóstico HIS</label>
                        <p-autoComplete [suggestions]="listaDeCIEHIS" (completeMethod)="filterCIE10($event)"
                            appendTo="body" field="descripcionItem" [minLength]="1" class="areaText"
                            class="inputfield p-fluid w-full" formControlName="buscarPDxHIS"
                            (onSelect)="onChangeHIS($event)" [dropdown]="true"
                            placeholder="Seleccionar un Procedimiento">
                        </p-autoComplete>
                    </div>
                    <div class="col-9 p-fluid">
                        <label>Código de procedimiento HIS (CIE 10): </label>
                        <p-autoComplete [suggestions]="listaDeCIEHIS" (completeMethod)="filterCIE10($event)"
                            appendTo="body" field="codigoItem" [minLength]="1" class="areaText"
                            class="inputfield p-fluid w-full" formControlName="codProcedimientoHIS"
                            (onSelect)="onChangeHIS($event)" [dropdown]="true"
                            placeholder="Seleccionar un Diagnostico">
                        </p-autoComplete>
                    </div>
                    <div class="col-3">
                        <button pButton pRipple icon="pi pi-plus" pButton type="button"
                            style="background-color: #0c3866" label="Agregar" class="add-button p-button-rounded"
                            (click)="agregateDiagnosticHIS()"></button>
                    </div>
                    <div class="col-12 p-fluid">
                        <textarea style="text-transform:uppercase" rows="3" cols="30" pInputTextarea
                            formControlName="procedimientoHIS"></textarea>
                    </div>
                </div>
            </form>
            <p-table class="table-over" [value]="arrayDiagnosticHIS" #dt styleClass="p-datatable-gridlines" [rows]="10">
                <ng-template pTemplate="header" styleClass="p-datatable-gridlines">
                    <tr>
                        <th style="text-align: center;" class="font-2">Nro</th>
                        <th style="text-align: center;" class="font-2">UPS Auxiliar</th>
                        <th style="text-align: center;" class="font-1">Diagnóstico</th>
                        <th style="text-align: center;" class="font-2">CIE 10</th>
                        <th style="text-align: center;" class="font-2">Tipo Diagnóstico</th>
                        <th style="text-align: center;" class="font-2">Lab</th>
                        <th style="text-align: center" class="font-2">Acción</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-i="rowIndex">
                    <tr>
                        <td style="text-align: center;" class="font-2">{{ i + 1 }}</td>
                        <td style="text-align: center;">{{ rowData.nombreUPSaux }}</td>
                        <td style="text-align: center;">{{ rowData.diagnosticoHIS }}</td>
                        <td style="text-align: center;">{{ rowData.CIE10 }}</td>
                        <td style="text-align: center;">{{ rowData.tipoDiagnostico }}</td>
                        <td style="text-align: center;">{{ rowData.lab }}</td>
                        <td style="text-align: center">
                            <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger m-1"
                                (click)="deleteItemOfArray(i, 1)" pTooltip="Eliminar" tooltipPosition="top"></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </p-panel>
    </div>
    <div class="col-12" *ngIf="!isSaved">
        <button pButton pRipple icon="pi pi-save" label="Guardar" pButton type="button"
            style="background-color: #0c3866;" label="Guardar" class="save-button p-button-rounded"
            (click)="confirmToSave()"></button>
    </div>
</div>