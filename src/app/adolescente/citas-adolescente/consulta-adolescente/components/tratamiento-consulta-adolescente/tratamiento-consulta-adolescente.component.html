<div class="col-12">
    <p-toolbar styleClass="p-mb-4">
        <ng-template pTemplate="left">
            <h3 class="p-m-0">TRATAMIENTO</h3>
        </ng-template>
        <ng-template pTemplate="right" class="button">
            <button pButton pRipple label="Siguiente" icon="pi pi-save" class="p-button-primary"
                (click)="guardarTratamiento()"></button>
        </ng-template>
    </p-toolbar>
    <form [formGroup]='form'>
        <div class="grid">
            <div class="col-12">
                <p-tabView>
                    <p-tabPanel header="TRATAMIENTO" headerStyleClass="w-2 text-center" leftIcon="pi pi-chart-line">
                        <div class="col-12 md:col-12 mt-2">
                            <p-table [value]="listaTratamientos" #dt [rows]="3" styleClass="p-datatable-sm"
                                [paginator]="true" [autoLayout]="true" class="m-3"
                                currentPageReportTemplate="Mostrando de {first} a {last} de {totalRecords} entradas"
                                [showCurrentPageReport]="true" responsiveLayout="scroll">
                                <ng-template pTemplate="caption">
                                    <div class="grid">
                                        <div class="col-10">
                                            <h3>Tratamientos:</h3>
                                        </div>
                                        <div class="col-2">
                                            <button pButton pRipple icon="pi pi-plus" type="button" label="Agregar"
                                                class="p-button-raised m    t-3"
                                                (click)="openDialogTratamiento()"></button>
                                        </div>
                                    </div>
                                </ng-template>
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="text-align: center;">Nro</th>
                                        <th style="text-align: center;">Descripción</th>
                                        <th style="text-align: center;">Número</th>
                                        <th style="text-align: center;">Dosis</th>
                                        <th style="text-align: center;">Via Administración</th>
                                        <th style="text-align: center;">Intervalo</th>
                                        <th style="text-align: center;">Observaciones</th>
                                        <th style="text-align: center;">Acción</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                                    <tr style="text-align: center">
                                        <td style="text-align: center">{{ rowIndex + 1 }}</td>
                                        <td style="text-align: center">{{ rowData.descripcion }}</td>
                                        <td style="text-align: center">{{ rowData.numero }}</td>
                                        <td style="text-align: center">{{ rowData.dosis }}</td>
                                        <td style="text-align: center">{{ rowData.viaAdministracion }}</td>
                                        <td style="text-align: center">{{ rowData.intervalo }}</td>
                                        <td style="text-align: center">{{ rowData.observaciones }}</td>
                                        <td style="text-align: center">
                                            <button pButton pRipple type="button" icon="pi pi-pencil"
                                                class="p-button-rounded p-button-text"
                                                (click)="openDialogEditarDiagnostico(rowData, rowIndex)"></button>
                                            <button pButton pRipple type="button" icon="pi pi-trash"
                                                class="p-button-rounded p-button-danger p-button-text"
                                                (click)="eliminarDiagnostico(rowIndex)"></button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="EXÁMENES AUX" headerStyleClass="w-2 text-center" leftIcon="pi pi-chart-line">
                        <div class="col-12 md:col-10 mt-2 pl-8">
                            <p-table [value]="listaSolicitudExamAux" #dt [rows]="3" styleClass="p-datatable-sm"
                                [paginator]="true" [autoLayout]="true" class="m-3"
                                currentPageReportTemplate="Mostrando de {first} a {last} de {totalRecords} entradas"
                                [showCurrentPageReport]="true" responsiveLayout="scroll">
                                <ng-template pTemplate="caption">
                                    <div class="grid">
                                        <div class="col-10">
                                            <h3>Exámenes Aux.:</h3>
                                        </div>
                                        <div class="col-2">
                                            <button pButton pRipple icon="pi pi-plus" type="button" label="Agregar"
                                                class="p-button-raised m    t-3" (click)="openDialogExamAux()"></button>
                                        </div>
                                    </div>
                                </ng-template>
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="text-align: center;">Nro</th>
                                        <th style="text-align: center;">Examen</th>
                                        <th style="text-align: center;">Acción</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                                    <tr style="text-align: center">
                                        <td style="text-align: center">{{ rowIndex + 1 }}</td>
                                        <td style="text-align: center">{{ rowData }}</td>
                                        <td style="text-align: center">
                                            <button pButton pRipple type="button" icon="pi pi-pencil"
                                                class="p-button-rounded p-button-text"
                                                (click)="openDialogEditarDiagnostico(rowData, rowIndex)"></button>
                                            <button pButton pRipple type="button" icon="pi pi-trash"
                                                class="p-button-rounded p-button-danger p-button-text"
                                                (click)="eliminarDiagnostico(rowIndex)"></button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="INTERCONSULTAS" headerStyleClass="w-2 text-center" leftIcon="pi pi-chart-line">
                        <div class="col-12 md:col-10 mt-2 pl-8">
                            <p-table [value]="listaInterconsultas" #dt [rows]="3" styleClass="p-datatable-sm"
                                [paginator]="true" [autoLayout]="true" class="m-3"
                                currentPageReportTemplate="Mostrando de {first} a {last} de {totalRecords} entradas"
                                [showCurrentPageReport]="true" responsiveLayout="scroll">
                                <ng-template pTemplate="caption">
                                    <div class="grid">
                                        <div class="col-10">
                                            <h3>Interconsultas:</h3>
                                        </div>
                                        <div class="col-2">
                                            <button pButton pRipple icon="pi pi-plus" type="button" label="Agregar"
                                                class="p-button-raised mt-3"
                                                (click)="openDialogInterconsulta()"></button>
                                        </div>
                                    </div>
                                </ng-template>
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="text-align: center;">Nro</th>
                                        <th style="text-align: center;">Consultorio</th>
                                        <th style="text-align: center;">Motivo</th>
                                        <th style="text-align: center;">Fecha</th>
                                        <th style="text-align: center;">Acción</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
                                    <tr style="text-align: center">
                                        <td style="text-align: center">{{ rowIndex + 1 }}</td>
                                        <td style="text-align: center">{{ rowData.consultorio }}</td>
                                        <td style="text-align: center">{{ rowData.motivo }}</td>
                                        <td style="text-align: center">{{ rowData.fecha }}</td>
                                        <td style="text-align: center">
                                            <button pButton pRipple type="button" icon="pi pi-pencil"
                                                class="p-button-rounded p-button-text"
                                                (click)="openDialogEditarDiagnostico(rowData, rowIndex)"></button>
                                            <button pButton pRipple type="button" icon="pi pi-trash"
                                                class="p-button-rounded p-button-danger p-button-text"
                                                (click)="eliminarDiagnostico(rowIndex)"></button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </p-tabPanel>
                </p-tabView>
            </div>
        </div>
        <div class="grid">
            <div class="col-12 md:col-6">
                <label>Compromisos y observaciones:</label>
                <textarea [rows]="4" class="inputfield w-full" autoResize="autoResize"
                    formControlName="compromisosObs" pInputTextarea
                    placeholder="Describa la medicación"></textarea>
            </div>
            <div class="col-12 md:col-6">
                <label>Proxima Cita:</label>
                <input formControlName="proximaCita" type="date" class="inputfield w-full" pInputText />
            </div>
        </div>
        <div class="grid">
            <div class="col-11">
                <label class="text-sm">REFERENCIA</label>
            </div>
            <div class="grid">
                <div class="col-4">
                    <label class="text-sm">Consultorio:</label>
                    <input formControlName="consultorioReferencia" type="text"
                        class="p-inputtext-sm " pInputText />
                </div>
                <div class="col-4">
                    <label class="text-sm">Motivo:</label>
                    <input formControlName="motivoReferencia" type="text"
                        class="p-inputtext-sm " pInputText />
                </div>
                <div class="col-4">
                    <label class="text-sm">IPRESS:</label>
                    <input formControlName="codRENAESReferencia" type="text"
                        class="p-inputtext-sm " pInputText />
                </div>
            </div>
        </div>
    </form>
</div>
<!-- DIALOG ADD TRATAMIENTO -->
<p-dialog class="dialogo m-3" [(visible)]="dialogTratamiento" [style]="{width: '30%'}" [modal]="true">
    <ng-template pTemplate="header">
        <h3>NUEVO TRATAMIENTO</h3>
    </ng-template>
    <ng-template pTemplate="body">
        <form [formGroup]='formTratamiento'>
            <div class="grid">
                <div class="col-4">
                    <label>Descripcion:</label>
                    <input type="text" pInputText formControlName='descripcion' placeholder="Descripcion"
                        class="p-inputtext-sm inputfield w-full">
                </div>
                <div class="col-4">
                    <label>Numero:</label>
                    <input type="number" pInputText formControlName='numero' placeholder="Numero"
                        class="p-inputtext-sm inputfield w-full">
                </div>
                <div class="col-4">
                    <label>Dosis:</label>
                    <input type="text" pInputText formControlName='dosis' placeholder="Dosis"
                        class="p-inputtext-sm inputfield w-full">
                </div>
                <div class="col-6">
                    <label>Via de Administracion:</label>
                    <p-dropdown [options]="listaViaAdministracion" formControlName="viaAdministracion" appendTo="body"
                        placeholder="Via Administracion" optionLabel="name" optionValue="name" [virtualScroll]="true"
                        class="inputfield p-fluid w-full">
                    </p-dropdown>
                </div>
                <div class="col-6">
                    <label>Intervalo:</label>
                    <p-dropdown [options]="listaIntervalos" formControlName="intervalo" appendTo="body"
                        optionLabel="name" optionValue="name" class="inputfield p-fluid w-full" placeholder="Intervalo">
                    </p-dropdown>
                </div>
                <div class="col-6">
                    <label>Duracion:</label>
                    <input type="text" pInputText formControlName='duracion' placeholder="Duracion"
                        class="p-inputtext inputfield w-full">
                </div>
                <div class="col-6">
                    <label>Observaciones:</label>
                    <input type="text" pInputText formControlName='observaciones' placeholder="Observaciones"
                        class="p-inputtext inputfield w-full">
                </div>
            </div>
        </form>
    </ng-template>
    <ng-template pTemplate="footer" class="text-right">
        <button *ngIf="estadoEditarTratamientos" pButton type="button" label="Guardar"
            (click)="guardarEdicionTratamiento()"></button>
        <button *ngIf="!estadoEditarTratamientos" pButton type="button" label="Guardar"
            (click)="aceptarDialogTratamiento()"></button>
        <button pButton type=" button" label="Cancelar" class="p-button-danger"
            (click)="closeDialogTratamiento()"></button>
    </ng-template>
</p-dialog>
<!-- DIALOG ADD EXAMEN  AUX -->
<p-dialog class="dialogo m-3" [(visible)]="dialogAuxExam" [style]="{width: '30%'}" [modal]="true">
    <ng-template pTemplate="header">
        <h3>SOLICITUD EXAMEM AUXILIAR</h3>
    </ng-template>
    <ng-template pTemplate="body">
        <form [formGroup]='formExamAux'>
            <div class="grid">
                <div class="col-12">
                    <label>Examen Auxiliar:</label>
                    <input type="text" pInputText formControlName='examAux' placeholder="Examen Auxiliar"
                        class="inputfield w-full">
                </div>
            </div>
        </form>
    </ng-template>
    <ng-template pTemplate="footer" class="text-right">
        <button *ngIf="estadoEditarTratamientos" pButton type="button" label="Guardar"
            (click)="guardarEdicionTratamiento()"></button>
        <button *ngIf="!estadoEditarTratamientos" pButton type="button" label="Guardar"
            (click)="aceptarSolicitudExamenAux()"></button>
        <button pButton type=" button" label="Cancelar" class="p-button-danger"
            (click)="closeDialogTratamiento()"></button>
    </ng-template>
</p-dialog>
<!-- DIALOG ADD INTERCONSULTAS -->
<p-dialog class="dialogo m-3" [(visible)]="dialogInterconsulta" [style]="{width: '30%'}" [modal]="true">
    <ng-template pTemplate="header">
        <h3>Interconsulta</h3>
    </ng-template>
    <ng-template pTemplate="body">
        <form [formGroup]='formInterconsulta'>
            <div class="grid">
                <div class="col-12 md:col-6">
                    <label>Consultorio:</label>
                    <input formControlName="consultorio" type="text" class="inputfield w-full" pInputText />
                </div>
                <div class="col-12 md:col-6">
                    <label>Fecha:</label>
                    <input formControlName="fechaInterconsulta" type="date" class="inputfield w-full" pInputText />
                </div>
                <div class="col-12 md:col-12">
                    <label>Motivo:</label>
                    <input formControlName="motivo" type="text" class="inputfield w-full" pInputText />
                </div>
            </div>
        </form>
    </ng-template>
    <ng-template pTemplate="footer" class="text-right">
        <button *ngIf="estadoEditarTratamientos" pButton type="button" label="Guardar"
            (click)="guardarEdicionTratamiento()"></button>
        <button *ngIf="!estadoEditarTratamientos" pButton type="button" label="Guardar"
            (click)="aceptarInterconsulta()"></button>
        <button pButton type=" button" label="Cancelar" class="p-button-danger"
            (click)="closeDialogTratamiento()"></button>
    </ng-template>
</p-dialog>